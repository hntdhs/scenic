{"ast":null,"code":"var _jsxFileName = \"/Users/mike/Desktop/scenic/src/profiles/ProfilePage.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useContext } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport BywayApi from \"../api/api\";\nimport UserContext from \"../auth/UserContext\";\nimport { NavLink } from \"react-router-dom\";\nimport BywayCard from \"../byways/BywayCard\";\nimport { useToasts } from 'react-toast-notifications';\n// import { getUserFavorites } from \"../../backend/models/user\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction ShowUserProfile() {\n  _s();\n  const {\n    username\n  } = useParams();\n  const {\n    addToast\n  } = useToasts();\n  const {\n    currentUser\n  } = useContext(UserContext);\n  const [isMe, setIsMe] = useState(false);\n  const [profileInfo, setProfileInfo] = useState({});\n  const [userFavorites, setUserFavorites] = useState([]);\n  const [sortBy, setSortBy] = useState('name');\n  const [sortDirection, setSortDirection] = useState('asc');\n  const [formErrors, setFormErrors] = useState([]);\n  async function getUserFavorites() {\n    let userFavorites = await BywayApi.getUserFavorites(username, sortBy, sortDirection);\n    setUserFavorites(userFavorites);\n  }\n  useEffect(() => {\n    async function getUserInfo() {\n      try {\n        let profileInfo = await BywayApi.getCurrentUser(username);\n        setProfileInfo(profileInfo);\n        if (errors) {\n          profileInfo.errors.forEach(i => addToast(i, {\n            appearance: 'error'\n          }));\n        }\n      } catch (errors) {\n        if (errors.length > 0) {\n          addToast(errors[0], {\n            appearance: 'error'\n          });\n        }\n        setFormErrors(errors);\n      }\n    }\n    getUserInfo();\n  }, [username]);\n  useEffect(() => {\n    if (currentUser && profileInfo) {\n      setIsMe(currentUser.username === profileInfo.username);\n    }\n  }, [profileInfo, currentUser]);\n  useEffect(() => {\n    // moved this to the top outside a useEffect to make it accessible to handleSubmitSortBy, but ended up not using it there, so could go back into this useEffect. don't think it matters if it's defined here or up top.\n    // async function getUserFavorites() {\n    //     let userFavorites = await BywayApi.getUserFavorites(username);\n    //     setUserFavorites(userFavorites);\n    // }\n    getUserFavorites();\n  }, [sortBy, sortDirection]);\n\n  // handleSubmit for removal button in map\n  // tell the function which byway is being removed by passing it into an anonymous function in the button's onClick below\n  async function handleSubmit(username, byway_id) {\n    await BywayApi.removeFavorite(username, byway_id);\n    getUserFavorites();\n  }\n  async function handleSubmitSortBy(sortField, direction) {\n    setSortBy(sortField);\n    setSortDirection(direction);\n    // sortField and direction get passed here from the onClick in JSX\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [isMe ? /*#__PURE__*/_jsxDEV(NavLink, {\n      to: `/profile/`,\n      children: \"Edit your profile\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 21\n    }, this) : '', isMe ? /*#__PURE__*/_jsxDEV(\"h3\", {\n      children: [\"Welcome to the profile page of \", profileInfo.username]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 21\n    }, this) : /*#__PURE__*/_jsxDEV(\"h3\", {\n      children: [\"Welcome to the profile page of \", username]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 86\n    }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n      src: profileInfo.profilePhoto,\n      alt: \"profile photo\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n      children: [\"Location: \", profileInfo.userLocation]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n      children: [\"Favorite State to Travel To: \", profileInfo.favoriteState]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [\"Bio: \", profileInfo.bio]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"USER FAVORITES\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n      children: \"Order favorites by:\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 13\n    }, this), sortBy == 'name' && sortDirection == 'asc' ?\n    /*#__PURE__*/\n    // these are the initial states for sortBy and sortDirection\n    _jsxDEV(\"button\", {\n      onClick: e => handleSubmitSortBy('name', 'desc'),\n      children: \"Z-A\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 18\n    }, this) :\n    /*#__PURE__*/\n    // button starts as Z-A because byways are initially A-Z, so if user wanted to reverse order from that, button should be the opposite of what's initally shown\n    _jsxDEV(\"button\", {\n      onClick: e => handleSubmitSortBy('name', 'asc'),\n      children: \"A-Z\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 18\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: e => handleSubmitSortBy('length', 'asc'),\n      children: \"Shortest to Longest\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: e => handleSubmitSortBy('length', 'desc'),\n      children: \"Longest to Shortest\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: userFavorites.map(f => /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(BywayCard, {\n          name: f.name,\n          image: f.image,\n          designation: f.designation\n        }, f.name + f.state, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 29\n        }, this), isMe ? /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => handleSubmit(username, f.byway_id),\n          children: \"Remove Favorite\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 29\n        }, this) : /*#__PURE__*/_jsxDEV(\"span\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 42\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 25\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 76,\n    columnNumber: 9\n  }, this);\n  // currentUser wouldn't work right if someone is looking at a different user's profile?\n  // maybe instead of BywayApi.getCurrentUser(username), BywayApi.getProfileInfo(username from params?)\n  // need to create some profiles to have a better look\n}\n_s(ShowUserProfile, \"v44T6t1Dpjfd6nTxJEzm5sjFjqA=\", false, function () {\n  return [useParams, useToasts];\n});\n_c = ShowUserProfile;\nexport default ShowUserProfile;\nvar _c;\n$RefreshReg$(_c, \"ShowUserProfile\");","map":{"version":3,"names":["React","useState","useEffect","useContext","useParams","BywayApi","UserContext","NavLink","BywayCard","useToasts","ShowUserProfile","username","addToast","currentUser","isMe","setIsMe","profileInfo","setProfileInfo","userFavorites","setUserFavorites","sortBy","setSortBy","sortDirection","setSortDirection","formErrors","setFormErrors","getUserFavorites","getUserInfo","getCurrentUser","errors","forEach","i","appearance","length","handleSubmit","byway_id","removeFavorite","handleSubmitSortBy","sortField","direction","profilePhoto","userLocation","favoriteState","bio","e","map","f","name","image","designation","state"],"sources":["/Users/mike/Desktop/scenic/src/profiles/ProfilePage.js"],"sourcesContent":["import React, { useState, useEffect, useContext } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport BywayApi from \"../api/api\";\nimport UserContext from \"../auth/UserContext\";\nimport { NavLink } from \"react-router-dom\";\nimport BywayCard from \"../byways/BywayCard\";\nimport { useToasts } from 'react-toast-notifications';\n// import { getUserFavorites } from \"../../backend/models/user\";\n\nfunction ShowUserProfile() {\n    const { username } = useParams();\n    const { addToast } = useToasts();\n    const { currentUser } = useContext(UserContext);\n    const [isMe, setIsMe] = useState(false)\n    const [profileInfo, setProfileInfo] = useState({});\n    const [userFavorites, setUserFavorites] = useState([]);\n    const [sortBy, setSortBy] = useState('name');\n    const [sortDirection, setSortDirection] = useState('asc');\n    const [formErrors, setFormErrors] = useState([]);\n\n    async function getUserFavorites() {\n        let userFavorites = await BywayApi.getUserFavorites(username, sortBy, sortDirection);\n        setUserFavorites(userFavorites);\n    }\n\n    useEffect(() => {  \n        async function getUserInfo() {\n            try {\n                let profileInfo = await BywayApi.getCurrentUser(username);\n                setProfileInfo(profileInfo);\n                if (errors) {\n                    profileInfo.errors.forEach(i =>  addToast(i, { appearance: 'error' }));\n                }    \n            } catch (errors) {\n                if (errors.length > 0) {\n                    addToast(errors[0], { appearance: 'error' });\n                }\n                setFormErrors(errors);\n            }\n    }\n    getUserInfo();\n    }, [username]);\n\n    useEffect(() => {\n        if (currentUser && profileInfo) {\n            setIsMe(currentUser.username === profileInfo.username);\n        }\n    }, [profileInfo, currentUser])   \n    \n    useEffect(() => {\n        // moved this to the top outside a useEffect to make it accessible to handleSubmitSortBy, but ended up not using it there, so could go back into this useEffect. don't think it matters if it's defined here or up top.\n        // async function getUserFavorites() {\n        //     let userFavorites = await BywayApi.getUserFavorites(username);\n        //     setUserFavorites(userFavorites);\n        // }\n        getUserFavorites();\n        \n    }, [sortBy, sortDirection])\n\n    // handleSubmit for removal button in map\n    // tell the function which byway is being removed by passing it into an anonymous function in the button's onClick below\n    async function handleSubmit(username, byway_id) {\n        await BywayApi.removeFavorite(username, byway_id);\n        getUserFavorites();\n    }\n\n    async function handleSubmitSortBy(sortField, direction) {\n        setSortBy(sortField)\n        setSortDirection(direction);\n        // sortField and direction get passed here from the onClick in JSX\n    }\n        \n    \n\n    return (\n        <div>\n            {isMe ? <NavLink to={`/profile/`}>Edit your profile</NavLink> : ''}\n            {isMe ? <h3>Welcome to the profile page of {profileInfo.username}</h3> : <h3>Welcome to the profile page of {username}</h3>}\n            <img src={profileInfo.profilePhoto} alt={\"profile photo\"} />\n            <h3>Location: {profileInfo.userLocation}</h3>\n            <h3>Favorite State to Travel To: {profileInfo.favoriteState}</h3>\n            <p>Bio: {profileInfo.bio}</p>\n            <h1>USER FAVORITES</h1>\n\n            <h4>Order favorites by:</h4>\n            {sortBy == 'name' && sortDirection == 'asc' ? \n            // these are the initial states for sortBy and sortDirection\n                (<button onClick={e => handleSubmitSortBy('name', 'desc')}>Z-A</button>) :\n                // button starts as Z-A because byways are initially A-Z, so if user wanted to reverse order from that, button should be the opposite of what's initally shown\n                (<button onClick={e => handleSubmitSortBy('name', 'asc')}>A-Z</button>)\n            }\n            <button onClick={e => handleSubmitSortBy('length', 'asc')}>Shortest to Longest</button>\n            <button onClick={e => handleSubmitSortBy('length', 'desc')}>Longest to Shortest</button>\n            <div>\n                    {userFavorites.map(f => (\n                        <div>\n                            <BywayCard\n                                key={f.name + f.state}\n                                name={f.name}\n                                image={f.image}\n                                designation={f.designation}\n                            />\n                            {isMe ? (\n                            <button onClick={() => handleSubmit(username, f.byway_id)}>\n                            Remove Favorite\n                            </button>) : <span></span> }\n                        </div>\n                    ))}\n                </div>\n        </div>\n    )\n    // currentUser wouldn't work right if someone is looking at a different user's profile?\n    // maybe instead of BywayApi.getCurrentUser(username), BywayApi.getProfileInfo(username from params?)\n    // need to create some profiles to have a better look\n}\n\nexport default ShowUserProfile;"],"mappings":"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"},"metadata":{},"sourceType":"module"}