{"ast":null,"code":"import _regeneratorRuntime from\"/Users/mike/Desktop/scenic/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _defineProperty from\"/Users/mike/Desktop/scenic/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/Users/mike/Desktop/scenic/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"/Users/mike/Desktop/scenic/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/mike/Desktop/scenic/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from\"react\";import{useHistory}from\"react-router-dom\";import Alert from\"../common/Alert\";import{useToasts}from'react-toast-notifications';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function SignupForm(_ref){var signup=_ref.signup;var _useToasts=useToasts(),addToast=_useToasts.addToast;var history=useHistory();var _useState=useState({username:\"\",password:\"\",firstName:\"\",lastName:\"\",email:\"\"}),_useState2=_slicedToArray(_useState,2),formData=_useState2[0],setFormData=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),formErrors=_useState4[0],setFormErrors=_useState4[1];console.debug(\"SignupForm\",\"signup=\",typeof signup,\"formData=\",formData,\"formErrors=\",formErrors);function handleSubmit(_x){return _handleSubmit.apply(this,arguments);}function _handleSubmit(){_handleSubmit=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(evt){var result;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:evt.preventDefault();_context.prev=1;_context.next=4;return signup(formData);case 4:result=_context.sent;if(result.success){history.push(\"/\");//   adding new screen to navigation stack, we're saying go to this url next, adding it to the list of pages visited at the end and going to it\n}else{result.errors.forEach(function(i){return addToast(i,{appearance:'error'});});}_context.next=12;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](1);if(_context.t0.length>0){addToast(_context.t0[0],{appearance:'error'});}setFormErrors(_context.t0);case 12:case\"end\":return _context.stop();}}},_callee,null,[[1,8]]);}));return _handleSubmit.apply(this,arguments);}function handleChange(evt){var _evt$target=evt.target,name=_evt$target.name,value=_evt$target.value;setFormData(function(data){return _objectSpread(_objectSpread({},data),{},_defineProperty({},name,value));});// question\n}return/*#__PURE__*/_jsxs(\"div\",{className:\"SignupForm\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Sign Up\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-inputs\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Username\"}),/*#__PURE__*/_jsx(\"input\",{name:\"username\",value:formData.username,onChange:handleChange}),/*#__PURE__*/_jsx(\"label\",{children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"password\",value:formData.password,onChange:handleChange}),/*#__PURE__*/_jsx(\"label\",{children:\"First name\"}),/*#__PURE__*/_jsx(\"input\",{name:\"firstName\",value:formData.firstName,onChange:handleChange}),/*#__PURE__*/_jsx(\"label\",{children:\"Last Name\"}),/*#__PURE__*/_jsx(\"input\",{name:\"lastName\",value:formData.lastName,onChange:handleChange}),/*#__PURE__*/_jsx(\"label\",{children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",name:\"email\",value:formData.email,onChange:handleChange})]}),formErrors.length?/*#__PURE__*/_jsx(Alert,{type:\"danger\",messages:formErrors}):null,/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary float-right\",onSubmit:handleSubmit,children:\"Submit\"})]})]});}export default SignupForm;","map":{"version":3,"names":["React","useState","useHistory","Alert","useToasts","SignupForm","signup","addToast","history","username","password","firstName","lastName","email","formData","setFormData","formErrors","setFormErrors","console","debug","handleSubmit","evt","preventDefault","result","success","push","errors","forEach","i","appearance","length","handleChange","target","name","value","data"],"sources":["/Users/mike/Desktop/scenic/src/auth/SignupForm.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport Alert from \"../common/Alert\";\nimport { useToasts } from 'react-toast-notifications';\n\n\nfunction SignupForm({ signup }) {\n    const { addToast } = useToasts();\n    const history = useHistory();\n    const [formData, setFormData] = useState({\n      username: \"\",\n      password: \"\",\n      firstName: \"\",\n      lastName: \"\",\n      email: \"\",\n    });\n    const [formErrors, setFormErrors] = useState([]);\n  \n    console.debug(\n        \"SignupForm\",\n        \"signup=\", typeof signup,\n        \"formData=\", formData,\n        \"formErrors=\", formErrors,\n    );\n\n    async function handleSubmit(evt) {\n        evt.preventDefault();\n        try {\n            let result = await signup(formData);\n            if (result.success) {\n                history.push(\"/\");\n        //   adding new screen to navigation stack, we're saying go to this url next, adding it to the list of pages visited at the end and going to it\n            }  else {\n                result.errors.forEach(i =>  addToast(i, { appearance: 'error' }));\n            }\n        } catch  (errors) {\n           \n            if (errors.length > 0) {\n                addToast(errors[0], { appearance: 'error' });\n            }\n            setFormErrors(errors);\n        }\n    }\n\n    function handleChange(evt) {\n        const { name, value } = evt.target;\n        setFormData(data => ({ ...data, [name]: value}));\n        // question\n    }\n\n    return (\n        <div className=\"SignupForm\">\n            <h2>Sign Up</h2>\n            <form onSubmit={handleSubmit}>\n                <div className=\"form-inputs\">\n                    <label>Username</label>\n                    <input\n                        name=\"username\"\n                        value={formData.username}\n                        onChange={handleChange}\n                    />\n                    <label>Password</label>\n                    <input\n                        type=\"password\"\n                        name=\"password\"\n                        value={formData.password}\n                        onChange={handleChange}\n                    />\n                    <label>First name</label>\n                    <input\n                      name=\"firstName\"\n                      value={formData.firstName}\n                      onChange={handleChange}\n                    />\n                    <label>Last Name</label>\n                    <input\n                        name=\"lastName\"\n                        value={formData.lastName}\n                        onChange={handleChange}\n                    />\n                    <label>Email</label>\n                    <input\n                        type=\"email\"\n                        name=\"email\"\n                        value={formData.email}\n                        onChange={handleChange}\n                    />\n\n                </div>\n\n                {formErrors.length\n                    ? <Alert type=\"danger\" messages={formErrors} />\n                    : null\n                }\n\n                <button\n                    type=\"submit\"\n                    className=\"btn btn-primary float-right\"\n                    onSubmit={handleSubmit}\n                >\n                  Submit\n                </button>\n\n            </form>\n        </div>\n    )\n\n\n\n\n}\n\nexport default SignupForm;"],"mappings":"ikBAAA,MAAOA,MAAK,EAAIC,QAAQ,KAAQ,OAAO,CACvC,OAASC,UAAU,KAAQ,kBAAkB,CAC7C,MAAOC,MAAK,KAAM,iBAAiB,CACnC,OAASC,SAAS,KAAQ,2BAA2B,CAAC,wFAGtD,QAASC,WAAU,MAAa,IAAVC,OAAM,MAANA,MAAM,CACxB,eAAqBF,SAAS,EAAE,CAAxBG,QAAQ,YAARA,QAAQ,CAChB,GAAMC,QAAO,CAAGN,UAAU,EAAE,CAC5B,cAAgCD,QAAQ,CAAC,CACvCQ,QAAQ,CAAE,EAAE,CACZC,QAAQ,CAAE,EAAE,CACZC,SAAS,CAAE,EAAE,CACbC,QAAQ,CAAE,EAAE,CACZC,KAAK,CAAE,EACT,CAAC,CAAC,wCANKC,QAAQ,eAAEC,WAAW,eAO5B,eAAoCd,QAAQ,CAAC,EAAE,CAAC,yCAAzCe,UAAU,eAAEC,aAAa,eAEhCC,OAAO,CAACC,KAAK,CACT,YAAY,CACZ,SAAS,CAAE,MAAOb,OAAM,CACxB,WAAW,CAAEQ,QAAQ,CACrB,aAAa,CAAEE,UAAU,CAC5B,CAAC,QAEaI,aAAY,kJAA3B,iBAA4BC,GAAG,+HAC3BA,GAAG,CAACC,cAAc,EAAE,CAAC,sCAEEhB,OAAM,CAACQ,QAAQ,CAAC,QAA/BS,MAAM,eACV,GAAIA,MAAM,CAACC,OAAO,CAAE,CAChBhB,OAAO,CAACiB,IAAI,CAAC,GAAG,CAAC,CACzB;AACI,CAAC,IAAO,CACJF,MAAM,CAACG,MAAM,CAACC,OAAO,CAAC,SAAAC,CAAC,QAAKrB,SAAQ,CAACqB,CAAC,CAAE,CAAEC,UAAU,CAAE,OAAQ,CAAC,CAAC,GAAC,CACrE,CAAC,+EAGD,GAAI,YAAOC,MAAM,CAAG,CAAC,CAAE,CACnBvB,QAAQ,CAAC,YAAO,CAAC,CAAC,CAAE,CAAEsB,UAAU,CAAE,OAAQ,CAAC,CAAC,CAChD,CACAZ,aAAa,aAAQ,CAAC,oEAE7B,+CAED,QAASc,aAAY,CAACV,GAAG,CAAE,CACvB,gBAAwBA,GAAG,CAACW,MAAM,CAA1BC,IAAI,aAAJA,IAAI,CAAEC,KAAK,aAALA,KAAK,CACnBnB,WAAW,CAAC,SAAAoB,IAAI,wCAAUA,IAAI,wBAAGF,IAAI,CAAGC,KAAK,IAAE,CAAC,CAChD;AACJ,CAEA,mBACI,aAAK,SAAS,CAAC,YAAY,wBACvB,oBAAI,SAAO,EAAK,cAChB,cAAM,QAAQ,CAAEd,YAAa,wBACzB,aAAK,SAAS,CAAC,aAAa,wBACxB,uBAAO,UAAQ,EAAQ,cACvB,cACI,IAAI,CAAC,UAAU,CACf,KAAK,CAAEN,QAAQ,CAACL,QAAS,CACzB,QAAQ,CAAEsB,YAAa,EACzB,cACF,uBAAO,UAAQ,EAAQ,cACvB,cACI,IAAI,CAAC,UAAU,CACf,IAAI,CAAC,UAAU,CACf,KAAK,CAAEjB,QAAQ,CAACJ,QAAS,CACzB,QAAQ,CAAEqB,YAAa,EACzB,cACF,uBAAO,YAAU,EAAQ,cACzB,cACE,IAAI,CAAC,WAAW,CAChB,KAAK,CAAEjB,QAAQ,CAACH,SAAU,CAC1B,QAAQ,CAAEoB,YAAa,EACvB,cACF,uBAAO,WAAS,EAAQ,cACxB,cACI,IAAI,CAAC,UAAU,CACf,KAAK,CAAEjB,QAAQ,CAACF,QAAS,CACzB,QAAQ,CAAEmB,YAAa,EACzB,cACF,uBAAO,OAAK,EAAQ,cACpB,cACI,IAAI,CAAC,OAAO,CACZ,IAAI,CAAC,OAAO,CACZ,KAAK,CAAEjB,QAAQ,CAACD,KAAM,CACtB,QAAQ,CAAEkB,YAAa,EACzB,GAEA,CAELf,UAAU,CAACc,MAAM,cACZ,KAAC,KAAK,EAAC,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAEd,UAAW,EAAG,CAC7C,IAAI,cAGV,eACI,IAAI,CAAC,QAAQ,CACb,SAAS,CAAC,6BAA6B,CACvC,QAAQ,CAAEI,YAAa,UAC1B,QAED,EAAS,GAEN,GACL,CAMd,CAEA,cAAef,WAAU"},"metadata":{},"sourceType":"module"}