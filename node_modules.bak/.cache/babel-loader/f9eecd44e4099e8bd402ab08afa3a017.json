{"ast":null,"code":"import _regeneratorRuntime from\"/Users/mike/Desktop/scenic/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/mike/Desktop/scenic/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _classCallCheck from\"/Users/mike/Desktop/scenic/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/mike/Desktop/scenic/node_modules/@babel/runtime/helpers/esm/createClass.js\";import axios from\"axios\";var BASE_URL=process.env.REACT_APP_BASE_URL||\"http://localhost:3001\";// ask about static async request method in jobly api, or look up where it's used\nvar BywayApi=/*#__PURE__*/function(){function BywayApi(){_classCallCheck(this,BywayApi);}_createClass(BywayApi,null,[{key:\"request\",value:// token for interacting with the API\nfunction(){var _request=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(endpoint){var data,method,url,headers,params,message,_args=arguments;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:data=_args.length>1&&_args[1]!==undefined?_args[1]:{};method=_args.length>2&&_args[2]!==undefined?_args[2]:\"get\";console.debug(\"API Call:\",endpoint,data,method);url=\"\".concat(BASE_URL,\"/\").concat(endpoint);headers={Authorization:\"Bearer \".concat(BywayApi.token)};params=method===\"get\"?data:{};_context.prev=6;_context.next=9;return axios({url:url,method:method,data:data,params:params,headers:headers});case 9:return _context.abrupt(\"return\",_context.sent.data);case 12:_context.prev=12;_context.t0=_context[\"catch\"](6);console.error(\"API Error:\",_context.t0);message=_context.t0.response.data.error.message;throw Array.isArray(message)?message:[message];case 17:case\"end\":return _context.stop();}}},_callee,null,[[6,12]]);}));function request(_x){return _request.apply(this,arguments);}return request;}()},{key:\"signup\",value:function(){var _signup=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(data){var res;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return this.request(\"auth/register\",data,\"post\");case 2:res=_context2.sent;return _context2.abrupt(\"return\",res.token);case 4:case\"end\":return _context2.stop();}}},_callee2,this);}));function signup(_x2){return _signup.apply(this,arguments);}return signup;}()},{key:\"login\",value:function(){var _login=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(data){var res;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return this.request(\"auth/token\",data,\"post\");case 2:res=_context3.sent;return _context3.abrupt(\"return\",res.token);case 4:case\"end\":return _context3.stop();}}},_callee3,this);}));function login(_x3){return _login.apply(this,arguments);}return login;}()},{key:\"getCurrentUser\",value:function(){var _getCurrentUser=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(username){var res;return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return this.request(\"users/\".concat(username));case 2:res=_context4.sent;return _context4.abrupt(\"return\",res.user);case 4:case\"end\":return _context4.stop();}}},_callee4,this);}));function getCurrentUser(_x4){return _getCurrentUser.apply(this,arguments);}return getCurrentUser;}()},{key:\"getAllStates\",value:function(){var _getAllStates=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee5(name){var res;return _regeneratorRuntime().wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return this.request(\"states\",{name:name});case 2:res=_context5.sent;return _context5.abrupt(\"return\",res);case 4:case\"end\":return _context5.stop();}}},_callee5,this);}));function getAllStates(_x5){return _getAllStates.apply(this,arguments);}return getAllStates;}()},{key:\"getAllUsers\",value:function(){var _getAllUsers=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee6(){var res;return _regeneratorRuntime().wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.next=2;return this.request('users');case 2:res=_context6.sent;return _context6.abrupt(\"return\",res);case 4:case\"end\":return _context6.stop();}}},_callee6,this);}));function getAllUsers(){return _getAllUsers.apply(this,arguments);}return getAllUsers;}()},{key:\"findBywaysByState\",value:function(){var _findBywaysByState=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee7(name){var res;return _regeneratorRuntime().wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:_context7.next=2;return this.request(\"states/\".concat(name));case 2:res=_context7.sent;return _context7.abrupt(\"return\",res);case 4:case\"end\":return _context7.stop();}}},_callee7,this);}));function findBywaysByState(_x6){return _findBywaysByState.apply(this,arguments);}return findBywaysByState;}()},{key:\"getAllByways\",value:function(){var _getAllByways=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee8(name){var res;return _regeneratorRuntime().wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:_context8.next=2;return this.request(\"byways\",{name:name});case 2:res=_context8.sent;return _context8.abrupt(\"return\",res);case 4:case\"end\":return _context8.stop();}}},_callee8,this);}));function getAllByways(_x7){return _getAllByways.apply(this,arguments);}return getAllByways;}()},{key:\"search\",value:function(){var _search=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee9(params){var res;return _regeneratorRuntime().wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:_context9.next=2;return this.request(\"byways/search\",params);case 2:res=_context9.sent;return _context9.abrupt(\"return\",res);case 4:case\"end\":return _context9.stop();}}},_callee9,this);}));function search(_x8){return _search.apply(this,arguments);}return search;}()},{key:\"getByway\",value:function(){var _getByway=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee10(name){var res;return _regeneratorRuntime().wrap(function _callee10$(_context10){while(1){switch(_context10.prev=_context10.next){case 0:_context10.next=2;return this.request(\"byways/\".concat(name));case 2:res=_context10.sent;return _context10.abrupt(\"return\",res);case 4:case\"end\":return _context10.stop();}}},_callee10,this);}));function getByway(_x9){return _getByway.apply(this,arguments);}return getByway;}()},{key:\"getCommentsByByway\",value:function(){var _getCommentsByByway=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee11(id){var res;return _regeneratorRuntime().wrap(function _callee11$(_context11){while(1){switch(_context11.prev=_context11.next){case 0:_context11.next=2;return this.request(\"byways/\".concat(id,\"/comments\"));case 2:res=_context11.sent;return _context11.abrupt(\"return\",res);case 4:case\"end\":return _context11.stop();}}},_callee11,this);}));function getCommentsByByway(_x10){return _getCommentsByByway.apply(this,arguments);}return getCommentsByByway;}()},{key:\"makeComment\",value:function(){var _makeComment=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee12(id,comment){var res;return _regeneratorRuntime().wrap(function _callee12$(_context12){while(1){switch(_context12.prev=_context12.next){case 0:_context12.next=2;return this.request(\"byways/\".concat(id,\"/comments\"),{comment:comment},\"post\");case 2:res=_context12.sent;return _context12.abrupt(\"return\",res);case 4:case\"end\":return _context12.stop();}}},_callee12,this);}));function makeComment(_x11,_x12){return _makeComment.apply(this,arguments);}return makeComment;}()},{key:\"favoriteAByway\",value:function(){var _favoriteAByway=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee13(username,id){var res;return _regeneratorRuntime().wrap(function _callee13$(_context13){while(1){switch(_context13.prev=_context13.next){case 0:_context13.next=2;return this.request(\"users/\".concat(username,\"/favorites/\").concat(id),{},\"post\");case 2:res=_context13.sent;return _context13.abrupt(\"return\",res);case 4:case\"end\":return _context13.stop();}}},_callee13,this);}));function favoriteAByway(_x13,_x14){return _favoriteAByway.apply(this,arguments);}return favoriteAByway;}()},{key:\"removeFavorite\",value:function(){var _removeFavorite=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee14(username,id){var res;return _regeneratorRuntime().wrap(function _callee14$(_context14){while(1){switch(_context14.prev=_context14.next){case 0:_context14.next=2;return this.request(\"users/\".concat(username,\"/favorites/\").concat(id),{},\"delete\");case 2:res=_context14.sent;return _context14.abrupt(\"return\",res);case 4:case\"end\":return _context14.stop();}}},_callee14,this);}));function removeFavorite(_x15,_x16){return _removeFavorite.apply(this,arguments);}return removeFavorite;}()},{key:\"getUserFavorites\",value:function(){var _getUserFavorites=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee15(username,sortField,sortDirection){var res;return _regeneratorRuntime().wrap(function _callee15$(_context15){while(1){switch(_context15.prev=_context15.next){case 0:_context15.next=2;return this.request(\"users/\".concat(username,\"/favorites?sort=\").concat(sortField,\"&direction=\").concat(sortDirection));case 2:res=_context15.sent;return _context15.abrupt(\"return\",res);case 4:case\"end\":return _context15.stop();}}},_callee15,this);}));function getUserFavorites(_x17,_x18,_x19){return _getUserFavorites.apply(this,arguments);}return getUserFavorites;}()},{key:\"saveProfile\",value:function(){var _saveProfile=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee16(username,data){var res;return _regeneratorRuntime().wrap(function _callee16$(_context16){while(1){switch(_context16.prev=_context16.next){case 0:_context16.next=2;return this.request(\"users/\".concat(username),data,\"patch\");case 2:res=_context16.sent;return _context16.abrupt(\"return\",res.user);case 4:case\"end\":return _context16.stop();}}},_callee16,this);}));function saveProfile(_x20,_x21){return _saveProfile.apply(this,arguments);}return saveProfile;}()},{key:\"getRandomByway\",value:function(){var _getRandomByway=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee17(){var res;return _regeneratorRuntime().wrap(function _callee17$(_context17){while(1){switch(_context17.prev=_context17.next){case 0:_context17.next=2;return this.request(\"byways/random\");case 2:res=_context17.sent;return _context17.abrupt(\"return\",res);case 4:case\"end\":return _context17.stop();}}},_callee17,this);}));function getRandomByway(){return _getRandomByway.apply(this,arguments);}return getRandomByway;}()}]);return BywayApi;}();export default BywayApi;","map":{"version":3,"names":["axios","BASE_URL","process","env","REACT_APP_BASE_URL","BywayApi","endpoint","data","method","console","debug","url","headers","Authorization","token","params","error","message","response","Array","isArray","request","res","username","user","name","id","comment","sortField","sortDirection"],"sources":["/Users/mike/Desktop/scenic/src/api/api.js"],"sourcesContent":["import axios from \"axios\";\n\nconst BASE_URL = process.env.REACT_APP_BASE_URL || \"http://localhost:3001\";\n\n// ask about static async request method in jobly api, or look up where it's used\n\nclass BywayApi {\n\n    static token;\n    // token for interacting with the API\n\n    static async request(endpoint, data = {}, method = \"get\") {\n      console.debug(\"API Call:\", endpoint, data, method);\n  \n      const url = `${BASE_URL}/${endpoint}`;\n      const headers = { Authorization: `Bearer ${BywayApi.token}` };\n      const params = (method === \"get\")\n          ? data\n          : {};\n  \n      try {\n        return (await axios({ url, method, data, params, headers })).data;\n      } catch (err) {\n        console.error(\"API Error:\", err);\n        let message = err.response.data.error.message;\n        throw Array.isArray(message) ? message : [message];\n      }\n    }  \n\n    static async signup(data) {\n        let res = await this.request(`auth/register`, data, \"post\");\n        return res.token;\n      }\n\n    static async login(data) {\n      let res = await this.request(`auth/token`, data, \"post\");\n      return res.token;\n    }\n\n    static async getCurrentUser(username) {\n      let res = await this.request(`users/${username}`);\n      return res.user;\n    }\n\n    static async getAllStates(name) {\n      let res = await this.request(\"states\", { name });\n      return res;\n    }\n\n    static async getAllUsers() {\n      let res = await this.request('users');\n      return res;\n    }\n\n    static async findBywaysByState(name) {\n      let res = await this.request(`states/${ name }`);\n      return res;\n    }\n\n    static async getAllByways(name) {\n      let res = await this.request(\"byways\", { name });\n      return res;\n    }\n\n    static async search(params) {\n      let res = await this.request(\"byways/search\", params);\n      return res;\n    }\n\n    static async getByway(name) {\n      let res = await this.request(`byways/${ name }`, );\n      return res;\n    }\n\n    static async getCommentsByByway(id) {\n      let res = await this.request(`byways/${ id }/comments`, );\n      return res;\n    }\n\n    static async makeComment(id, comment) {\n      let res = await this.request(`byways/${ id }/comments`, {comment}, \"post\");\n      return res;\n    }\n\n    static async favoriteAByway(username, id) {\n      let res = await this.request(`users/${ username }/favorites/${id}`, {}, \"post\");\n      return res;\n    }\n\n    static async removeFavorite(username, id) {\n      let res = await this.request(`users/${ username }/favorites/${id}`, {}, \"delete\");\n      return res;\n      // can't tell if I need that empty object like favAByway or something different or nothing\n      // it was needed, not having it but then having 'delete' made it think delete was data instead of method, see top line of function and what's inside the parentheses for request\n    }\n\n    static async getUserFavorites(username, sortField, sortDirection) {\n      let res = await this.request(`users/${ username }/favorites?sort=${sortField}&direction=${sortDirection}`);\n      return res;\n    }\n\n    static async saveProfile(username, data) {\n      let res = await this.request(`users/${username}`, data, \"patch\");\n      return res.user;\n    }\n\n    static async getRandomByway() {\n      let res = await this.request(`byways/random`, );\n      return res;\n    }\n\n\n\n\n}\n\nexport default BywayApi;"],"mappings":"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"},"metadata":{},"sourceType":"module"}