{"ast":null,"code":"import axios from \"axios\";\nconst BASE_URL = process.env.REACT_APP_BASE_URL || \"http://localhost:3001\";\n// that process.env will be the envirnment var to set on the front to talk to the back\n// ask about static async request method in jobly api, or look up where it's used\n\nclass BywayApi {\n  // token for interacting with the API\n\n  static async request(endpoint) {\n    let data = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    let method = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : \"get\";\n    console.debug(\"API Call:\", endpoint, data, method);\n    const url = `${BASE_URL}/${endpoint}`;\n    const headers = {\n      Authorization: `Bearer ${BywayApi.token}`\n    };\n    const params = method === \"get\" ? data : {};\n    try {\n      return (await axios({\n        url,\n        method,\n        data,\n        params,\n        headers\n      })).data;\n    } catch (err) {\n      console.error(\"API Error:\", err);\n      let message = err.response.data.error.message;\n      throw Array.isArray(message) ? message : [message];\n    }\n  }\n  static async signup(data) {\n    let res = await this.request(`auth/register`, data, \"post\");\n    return res.token;\n  }\n  static async login(data) {\n    let res = await this.request(`auth/token`, data, \"post\");\n    return res.token;\n  }\n  static async getCurrentUser(username) {\n    let res = await this.request(`users/${username}`);\n    return res.user;\n  }\n  static async getAllStates(name) {\n    let res = await this.request(\"states\", {\n      name\n    });\n    return res;\n  }\n  static async getAllUsers() {\n    let res = await this.request('users');\n    return res;\n  }\n  static async findBywaysByState(name) {\n    let res = await this.request(`states/${name}`);\n    return res;\n  }\n  static async getAllByways(name) {\n    let res = await this.request(\"byways\", {\n      name\n    });\n    return res;\n  }\n  static async search(params) {\n    let res = await this.request(\"byways/search\", params);\n    return res;\n  }\n  static async getByway(name) {\n    let res = await this.request(`byways/${name}`);\n    return res;\n  }\n  static async getCommentsByByway(id) {\n    let res = await this.request(`byways/${id}/comments`);\n    return res;\n  }\n  static async makeComment(id, comment) {\n    let res = await this.request(`byways/${id}/comments`, {\n      comment\n    }, \"post\");\n    return res;\n  }\n  static async favoriteAByway(username, id) {\n    let res = await this.request(`users/${username}/favorites/${id}`, {}, \"post\");\n    return res;\n  }\n  static async removeFavorite(username, id) {\n    let res = await this.request(`users/${username}/favorites/${id}`, {}, \"delete\");\n    return res;\n    // can't tell if I need that empty object like favAByway or something different or nothing\n    // it was needed, not having it but then having 'delete' made it think delete was data instead of method, see top line of function and what's inside the parentheses for request\n  }\n\n  static async getUserFavorites(username, sortField, sortDirection) {\n    let res = await this.request(`users/${username}/favorites?sort=${sortField}&direction=${sortDirection}`);\n    return res;\n  }\n  static async saveProfile(username, data) {\n    let res = await this.request(`users/${username}`, data, \"patch\");\n    return res.user;\n  }\n  static async getRandomByway() {\n    let res = await this.request(`byways/random`);\n    return res;\n  }\n}\nexport default BywayApi;","map":{"version":3,"names":["axios","BASE_URL","process","env","REACT_APP_BASE_URL","BywayApi","request","endpoint","data","method","console","debug","url","headers","Authorization","token","params","err","error","message","response","Array","isArray","signup","res","login","getCurrentUser","username","user","getAllStates","name","getAllUsers","findBywaysByState","getAllByways","search","getByway","getCommentsByByway","id","makeComment","comment","favoriteAByway","removeFavorite","getUserFavorites","sortField","sortDirection","saveProfile","getRandomByway"],"sources":["/Users/mike/Desktop/scenic/src/api/api.js"],"sourcesContent":["import axios from \"axios\";\n\nconst BASE_URL = process.env.REACT_APP_BASE_URL || \"http://localhost:3001\";\n// that process.env will be the envirnment var to set on the front to talk to the back\n// ask about static async request method in jobly api, or look up where it's used\n\nclass BywayApi {\n\n    static token;\n    // token for interacting with the API\n\n    static async request(endpoint, data = {}, method = \"get\") {\n      console.debug(\"API Call:\", endpoint, data, method);\n  \n      const url = `${BASE_URL}/${endpoint}`;\n      const headers = { Authorization: `Bearer ${BywayApi.token}` };\n      const params = (method === \"get\")\n          ? data\n          : {};\n  \n      try {\n        return (await axios({ url, method, data, params, headers })).data;\n      } catch (err) {\n        console.error(\"API Error:\", err);\n        let message = err.response.data.error.message;\n        throw Array.isArray(message) ? message : [message];\n      }\n    }  \n\n    static async signup(data) {\n        let res = await this.request(`auth/register`, data, \"post\");\n        return res.token;\n      }\n\n    static async login(data) {\n      let res = await this.request(`auth/token`, data, \"post\");\n      return res.token;\n    }\n\n    static async getCurrentUser(username) {\n      let res = await this.request(`users/${username}`);\n      return res.user;\n    }\n\n    static async getAllStates(name) {\n      let res = await this.request(\"states\", { name });\n      return res;\n    }\n\n    static async getAllUsers() {\n      let res = await this.request('users');\n      return res;\n    }\n\n    static async findBywaysByState(name) {\n      let res = await this.request(`states/${ name }`);\n      return res;\n    }\n\n    static async getAllByways(name) {\n      let res = await this.request(\"byways\", { name });\n      return res;\n    }\n\n    static async search(params) {\n      let res = await this.request(\"byways/search\", params);\n      return res;\n    }\n\n    static async getByway(name) {\n      let res = await this.request(`byways/${ name }`, );\n      return res;\n    }\n\n    static async getCommentsByByway(id) {\n      let res = await this.request(`byways/${ id }/comments`, );\n      return res;\n    }\n\n    static async makeComment(id, comment) {\n      let res = await this.request(`byways/${ id }/comments`, {comment}, \"post\");\n      return res;\n    }\n\n    static async favoriteAByway(username, id) {\n      let res = await this.request(`users/${ username }/favorites/${id}`, {}, \"post\");\n      return res;\n    }\n\n    static async removeFavorite(username, id) {\n      let res = await this.request(`users/${ username }/favorites/${id}`, {}, \"delete\");\n      return res;\n      // can't tell if I need that empty object like favAByway or something different or nothing\n      // it was needed, not having it but then having 'delete' made it think delete was data instead of method, see top line of function and what's inside the parentheses for request\n    }\n\n    static async getUserFavorites(username, sortField, sortDirection) {\n      let res = await this.request(`users/${ username }/favorites?sort=${sortField}&direction=${sortDirection}`);\n      return res;\n    }\n\n    static async saveProfile(username, data) {\n      let res = await this.request(`users/${username}`, data, \"patch\");\n      return res.user;\n    }\n\n    static async getRandomByway() {\n      let res = await this.request(`byways/random`, );\n      return res;\n    }\n\n\n\n\n}\n\nexport default BywayApi;"],"mappings":"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"},"metadata":{},"sourceType":"module"}