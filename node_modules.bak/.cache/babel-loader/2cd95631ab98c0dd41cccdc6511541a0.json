{"ast":null,"code":"var _jsxFileName = \"/Users/mike/Desktop/scenic/src/auth/LoginForm.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport Alert from \"../common/Alert\";\nimport { useToasts } from 'react-toast-notifications';\n\n/** Login form.\n *\n * Shows form and manages update to state on changes.\n * On submission:\n * - calls login function prop\n * - redirects to /companies route\n *\n * Routes -> LoginForm -> Alert\n * Routed as /login\n */\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction LoginForm(_ref) {\n  _s();\n  let {\n    login\n  } = _ref;\n  const {\n    addToast\n  } = useToasts();\n  const history = useHistory();\n  const [formData, setFormData] = useState({\n    username: \"\",\n    password: \"\"\n  });\n  const [formErrors, setFormErrors] = useState([]);\n  console.debug(\"LoginForm\", \"login=\", typeof login, \"formData=\", formData, \"formErrors\", formErrors);\n\n  /** Handle form submit:\n   *\n   * Calls login func prop and, if successful, redirect to /companies.\n   */\n\n  async function handleSubmit(evt) {\n    evt.preventDefault();\n    try {\n      let result = await login(formData);\n      if (result.success) {\n        history.push(\"/\");\n      } else {\n        result.errors.forEach(i => addToast(i, {\n          appearance: 'error'\n        }));\n      }\n    } catch (errors) {\n      if (errors.length > 0) {\n        addToast(errors[0], {\n          appearance: 'error'\n        });\n      }\n      setFormErrors(errors);\n    }\n  }\n\n  /** Update form data field */\n  function handleChange(evt) {\n    const {\n      name,\n      value\n    } = evt.target;\n    setFormData(l => ({\n      ...l,\n      [name]: value\n    }));\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"LoginForm\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container col-md-6 offset-md-3 col-lg-4 offset-lg-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"mb-3\",\n        children: \"Log In\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card-body\",\n          children: /*#__PURE__*/_jsxDEV(\"form\", {\n            onSubmit: handleSubmit,\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"Username\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 71,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                name: \"username\",\n                className: \"form-control\",\n                value: formData.username,\n                onChange: handleChange,\n                autoComplete: \"username\",\n                required: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 72,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 70,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"Password\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 82,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"password\",\n                name: \"password\",\n                className: \"form-control\",\n                value: formData.password,\n                onChange: handleChange,\n                autoComplete: \"current-password\",\n                required: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 83,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 81,\n              columnNumber: 17\n            }, this), formErrors.length ? /*#__PURE__*/_jsxDEV(Alert, {\n              type: \"danger\",\n              messages: formErrors\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 95,\n              columnNumber: 23\n            }, this) : null, /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn btn-primary float-right\",\n              onSubmit: handleSubmit,\n              children: \"Submit\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 98,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 69,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 63,\n    columnNumber: 7\n  }, this);\n}\n_s(LoginForm, \"syf7dfbfcOrFgIo4KSOzp3q5n70=\", false, function () {\n  return [useToasts, useHistory];\n});\n_c = LoginForm;\nexport default LoginForm;\nvar _c;\n$RefreshReg$(_c, \"LoginForm\");","map":{"version":3,"names":["React","useState","useHistory","Alert","useToasts","LoginForm","login","addToast","history","formData","setFormData","username","password","formErrors","setFormErrors","console","debug","handleSubmit","evt","preventDefault","result","success","push","errors","forEach","i","appearance","length","handleChange","name","value","target","l"],"sources":["/Users/mike/Desktop/scenic/src/auth/LoginForm.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport Alert from \"../common/Alert\";\nimport { useToasts } from 'react-toast-notifications';\n\n\n/** Login form.\n *\n * Shows form and manages update to state on changes.\n * On submission:\n * - calls login function prop\n * - redirects to /companies route\n *\n * Routes -> LoginForm -> Alert\n * Routed as /login\n */\n\nfunction LoginForm({ login }) {\n  const { addToast } = useToasts();\n  const history = useHistory();\n  const [formData, setFormData] = useState({\n    username: \"\",\n    password: \"\",\n  });\n  const [formErrors, setFormErrors] = useState([]);\n\n  console.debug(\n      \"LoginForm\",\n      \"login=\", typeof login,\n      \"formData=\", formData,\n      \"formErrors\", formErrors,\n  );\n\n  /** Handle form submit:\n   *\n   * Calls login func prop and, if successful, redirect to /companies.\n   */\n\n  async function handleSubmit(evt) {\n    evt.preventDefault();\n    try {\n      let result = await login(formData);\n      if (result.success) {\n        history.push(\"/\");\n      } else {\n        result.errors.forEach(i =>  addToast(i, { appearance: 'error' }));\n      }\n    } catch (errors) {\n      if (errors.length > 0) {\n        addToast(errors[0], { appearance: 'error' });\n      }\n      setFormErrors(errors);\n  }\n  }\n\n  /** Update form data field */\n  function handleChange(evt) {\n    const { name, value } = evt.target;\n    setFormData(l => ({ ...l, [name]: value }));\n  }\n\n  return (\n      <div className=\"LoginForm\">\n        <div className=\"container col-md-6 offset-md-3 col-lg-4 offset-lg-4\">\n          <h3 className=\"mb-3\">Log In</h3>\n\n          <div className=\"card\">\n            <div className=\"card-body\">\n              <form onSubmit={handleSubmit}>\n                <div className=\"form-group\">\n                  <label>Username</label>\n                  <input\n                      name=\"username\"\n                      className=\"form-control\"\n                      value={formData.username}\n                      onChange={handleChange}\n                      autoComplete=\"username\"\n                      required\n                  />\n                </div>\n                <div className=\"form-group\">\n                  <label>Password</label>\n                  <input\n                      type=\"password\"\n                      name=\"password\"\n                      className=\"form-control\"\n                      value={formData.password}\n                      onChange={handleChange}\n                      autoComplete=\"current-password\"\n                      required\n                  />\n                </div>\n\n                {formErrors.length\n                    ? <Alert type=\"danger\" messages={formErrors} />\n                    : null}\n\n                <button\n                    className=\"btn btn-primary float-right\"\n                    onSubmit={handleSubmit}\n                >\n                  Submit\n                </button>\n              </form>\n            </div>\n          </div>\n        </div>\n      </div>\n  );\n}\n\nexport default LoginForm;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}